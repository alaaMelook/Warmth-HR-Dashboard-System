{% extends "base.html" %}
{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <!-- Header -->
    <div class="auth-header">
      <div class="auth-logo">üîê</div>
      <h1 class="auth-title">HR Management System</h1>
      <p class="auth-subtitle">Secure login powered by Keycloak</p>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="alert-messages">
          {% for category, msg in messages %}
            {% if category == 'success' %}
              <div class="alert-success" style="margin-bottom:12px;">{{ msg }}</div>
            {% elif category == 'danger' %}
              <div class="alert-error" style="margin-bottom:12px;">{{ msg }}</div>
            {% else %}
              <div class="alert-error" style="margin-bottom:12px;">{{ msg }}</div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Keycloak Login Button -->
    <a href="{{ url_for('keycloak_login') }}" class="btn" style="display: block; text-align: center; text-decoration: none;">
      üîê Login with Keycloak
    </a>

    <!-- Info Text -->
    <div class="register-link" style="text-align: center; margin-top: 20px;">
      <p style="color: #666; font-size: 14px;">
        Click the button above to securely authenticate via Keycloak
      </p>
    </div>
  </div>
</div>

<script>
  // Auto-hide flash messages after 3 seconds
  document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert-success, .alert-error');
    alerts.forEach(function(alert) {
      setTimeout(function() {
        alert.style.transition = 'opacity 0.5s ease';
        alert.style.opacity = '0';
        setTimeout(function() {
          alert.remove();
        }, 500);
      }, 3000);
    });
  });
</script>
{% endblock %}